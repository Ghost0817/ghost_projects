{% extends 'entertaiment.html.twig' %}

{% block body_id 'blog_index' %}

{% block body %}
<div class="body-container">
    <div class="header"><h2>Blog Name</h2></div>
    <div class="main-container">
        {% for post in paginator.results %}
            <article class="post">
                <a href="{{ path('blog_post', {slug: post.slug}) }}">
                    <img src="{{ asset('/uploads/posts/' ~ post.imageEn ) }}" alt="{% if app.request.attributes.get('_locale') == 'mn' %}{{ post.titleMn }}{% else %}{{ post.titleEn }}{% endif %}" />
                </a>
                <h2>
                    <a href="{{ path('blog_post', {slug: post.slug}) }}">
                        {% if app.request.attributes.get('_locale') == 'mn' %}{{ post.titleMn }}{% else %}{{ post.titleEn }}{% endif %}
                    </a>
                </h2>

                {{ include('entertaiment/blog/_post_tags.html.twig') }}

                <p class="post-metadata">
                    <span class="metadata"><i class="fa fa-calendar"></i> {{ post.publishedAt|format_datetime('long', 'medium', '', 'UTC') }}</span>
                    <span class="metadata"><i class="fa fa-user"></i> {{ post.author.fullName }}</span>
                </p>

                <p>{{ post.summary }}</p>
            </article>
        {% else %}
            <h1>Nothing Found</h1>
            <hr/>
            <div><p>Sorry, but nothing matched your search terms. Please try again with some different keywords.</p></div>
            <form action="{{ path('blog_search') }}" method="get" id="searchform">
                <input name="q" type="text"
                    class="search-field"
                    placeholder="{{ 'post.search_for'|trans }}"
                    autocomplete="off"
                    autofocus
                    data-no-results-message="{{ 'post.search_no_results'|trans }}"
                >
                <input type="submit" class="btn btn--a submit" name="submit" id="searchsubmit" value="Search">
            </form>
        {% endfor %}

        {% if paginator.hasToPaginate %}
            <div class="navigation text-center">
                <ul class="pagination">
                    {% if paginator.hasPreviousPage %}
                        <li class="prev"><a href="{{ path('blog_index_paginated', {page: paginator.previousPage}) }}" rel="previous"><i class="fa fw fa-long-arrow-left"></i> {{ 'paginator.previous'|trans }}</a></li>
                    {% else %}
                        <li class="prev disabled"><span><i class="fa fw fa-arrow-left"></i> {{ 'paginator.previous'|trans }}</span></li>
                    {% endif %}

                    {% for i in 1..paginator.lastPage %}
                        {% if i == paginator.currentPage %}
                            <li class="active"><span>{{ i }} <span class="sr-only">{{ 'paginator.current'|trans }}</span></span></li>
                        {% else %}
                            <li><a href="{{ path('blog_index_paginated', {page: i}) }}">{{ i }}</a></li>
                        {% endif %}
                    {% endfor %}

                    {% if paginator.hasNextPage %}
                        <li class="next"><a href="{{ path('blog_index_paginated', {page: paginator.nextPage}) }}" rel="next">{{ 'paginator.next'|trans }} <i class="fa fw fa-arrow-right"></i></a></li>
                    {% else %}
                        <li class="next disabled"><span>{{ 'paginator.next'|trans }} <i class="fa fw fa-arrow-right"></i></span></li>
                    {% endif %}
                </ul>
            </div>
        {% endif %}
    
    </div>
    <div class="sidebar">
        <div class="card">
            <h2>Bicheech.com Blog</h2>
            <div>Keep up with Bicheech.com features, industry news, educational musings and more.</div>
        </div>
        <div class="card">
            <h3>Most Popular Posts</h3>
            <ul>
            {% for post in posts %}
                <li class="popular-item" style="clear: both;
    min-height: 90px;
    border-bottom: 1px solid #f5f5f5;
    list-style: none;
    padding-top: 8px;
    padding-bottom: 8px;">
                    <div class="popular-img" style="background-image: url({{asset('/uploads/posts/' ~ post.imageEn )}});background-size: cover;
    background-repeat: no-repeat;
    background-position: 50% 50%;
    width: 80px;
    height: 80px;">
                        <a href="{{ path('blog_post', {slug: post.slug}) }}" style="display: block;
    width: 80px;
    height: 80px;">
                        </a>
                    </div>
                    <div class="popular-title" style="font-weight: 700;color: #777;">
                            <a href="{{ path('blog_post', {slug: post.slug}) }}">
                                {{ post.title }}
                            </a>
                    </div>
                </li>
            {% endfor %}
            </ul>

            <hr/>
            
            <form action="{{ path('blog_search') }}" method="get" id="searchform">
                <input name="q" type="text"
                    class="search-field"
                    placeholder="{{ 'post.search_for'|trans }}"
                    autocomplete="off"
                    autofocus
                    data-no-results-message="{{ 'post.search_no_results'|trans }}"
                >
                <input type="submit" class="btn btn--a submit" name="submit" id="searchsubmit" value="Search">
            </form>
        </div>
        <div class="card">
            {{ include('entertaiment/blog/_post_topics.html.twig') }}
        </div>
        <div class="card">
            <h3>Follow Me</h3>
            <p>Some text..</p>
        </div>
    </div>
</div>

{% endblock %}
